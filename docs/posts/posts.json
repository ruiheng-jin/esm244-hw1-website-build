[
  {
    "path": "posts/2021-02-26-welcome/",
    "title": "welcome",
    "description": "A short description of the post.",
    "author": [
      {
        "name": "Unknown",
        "url": {}
      }
    ],
    "date": "2021-02-26",
    "categories": [],
    "contents": "\r\n\r\nCode\r\nnone_text <- pdf_text(here(\".\", \"and_then_there_were_none.pdf\"))\r\n\r\n\r\n\r\n\r\nCode\r\nnone_tidy <- data.frame(none_text) %>% # each line is a page\r\n  mutate(text_full = str_split(none_text, pattern = \"\\\\n\")) %>% # add an additional \\ # each line is an element in a page element\r\n  unnest(text_full) %>% # each line has a line in the data frame\r\n  mutate(text_full=  str_trim(text_full)) # trim off excess spaces\r\n\r\n\r\nnone_df <- none_tidy %>% \r\n  slice(-1) %>% \r\n  mutate(chapter = case_when(\r\n    str_detect(text_full, pattern = \"Chapter\") ~ text_full, # if has Chapter, then repeat the value in column text_full\r\n    TRUE ~ NA_character_ # if anything else is TRUE, then populate the new column with NA\r\n  )) %>% \r\n  fill(chapter) %>% \r\n  separate(col = chapter, into = c(\"ch\", \"no\"), sep = \" \") %>% \r\n  mutate(chapter = as.numeric(no))\r\n\r\nnone_tokens <- none_df %>% \r\n  unnest_tokens(word, text_full) %>% # changing resolution from line to words\r\n  dplyr::select(-none_text)\r\n\r\nnone_wordcount <- none_tokens %>% \r\n  count(chapter, word) # after this, want to exclude \"stop words\"\r\n\r\n\r\n\r\n\r\nCode\r\n# remove stop words\r\nnone_nonstop_words <- none_tokens %>% \r\n  anti_join(stop_words) # telling r what we don't want to include in none_tokens\r\n\r\nnonstop_count <- none_nonstop_words %>% \r\n  count(chapter, word)\r\n\r\n# find top 5 words by chapter \r\ntop_5_words <- nonstop_count %>% \r\n  group_by(chapter) %>% \r\n  arrange(-n) %>% \r\n  slice(1:5)\r\n\r\nggplot(data = top_5_words, aes(x = word, y = n)) +\r\n  geom_col(fill = \"#C74343\") +\r\n  facet_wrap(~chapter, scales = \"free\") +\r\n  coord_flip() + \r\n  labs(x = \"\",\r\n       y = \"Number of occurrences\",\r\n       title = \"Most Frequently Used Words in 'And Then There Were None' \\nby Chapter\",\r\n       caption = \"Christie, Agatha. 1939, And Then There Were None.\") +\r\n  theme_minimal()+\r\n  theme(\r\n    plot.background = element_rect(fill = \"#39354F\", colour = NA),\r\n    panel.background = element_rect(fill = \"#515076\", colour = NA),\r\n    axis.text = element_text(color = \"#F3CA24\", size = 7),\r\n    title = element_text(color = \"#F3CA24\", size = 13),\r\n    panel.grid = element_line(color = \"black\"),\r\n    strip.text = element_text(color = \"#F3CA24\"),\r\n    plot.caption = element_text(size = 7))\r\n\r\n\r\n\r\n\r\n\r\nCode\r\n# sentiment analysis\r\nnone_afinn <- none_nonstop_words %>% \r\n  inner_join(get_sentiments(\"afinn\"))\r\n\r\nafinn_counts <- none_afinn %>% \r\n  count(chapter, value)\r\n\r\nafinn_means <- none_afinn %>% \r\n  group_by(chapter) %>% \r\n  summarize(mean_afinn = mean(value))\r\n\r\n\r\n\r\n\r\nCode\r\nnone_nrc <- none_nonstop_words %>% \r\n  inner_join(get_sentiments(\"nrc\"))\r\n\r\nnone_nrc_count <- none_nrc %>% \r\n  count(chapter, sentiment)\r\n\r\nggplot(data = none_nrc_count, aes(x = sentiment, y = n)) +\r\n  geom_col(fill = \"#C74343\") +\r\n  facet_wrap(~chapter) +\r\n  coord_flip() + \r\n  labs(y = \"Number of occurrences\",\r\n       x = \"Sentiment\",\r\n       title = \"Sentiment Analysis for 'And Then There Were None' \\nby Chapter\",\r\n       caption = \"Christie, Agatha. 1939, And Then There Were None.\") +\r\n  theme_minimal()+\r\n  theme(\r\n    plot.background = element_rect(fill = \"#39354F\", colour = NA),\r\n    panel.background = element_rect(fill = \"#515076\", colour = NA),\r\n    axis.text = element_text(color = \"#F3CA24\", size = 7),\r\n    title = element_text(color = \"#F3CA24\", size = 13),\r\n    panel.grid = element_line(color = \"black\"),\r\n    strip.text = element_text(color = \"#F3CA24\"),\r\n    plot.caption = element_text(size = 7))\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n",
    "preview": "posts/2021-02-26-welcome/welcome_files/figure-html5/unnamed-chunk-3-1.png",
    "last_modified": "2021-02-26T01:03:57+08:00",
    "input_file": {}
  }
]
